<%= f.error_messages %>

<p>
  <%= f.label :title %><br />
  <%= f.text_field :title,:size=>80 %>
</p>
<p>
  <%= f.label :description %><br />
  <%= f.text_area :description, :cols=>80,:rows => 10 %>
</p>
<p>
	Is a requirement of: 
	<%= f.select(:parent_id, current_user.weals.reject {|w| w.id == @weal.id}.collect {|w| [ w.title, w.id ] }, :include_blank => '-none-')%>
<p>
<% case @type
	when :intentions %>
<%if @weal.requester && @weal.fulfiller 
	if @weal.requester == current_user
		i_am = 'requester'
		other_is = 'fulfiller'
		other = @weal.fulfiller
	else
		i_am = 'fulfiller'
		other_is = 'requester'
		other = @weal.requester
	end
	%>
<p>
	For this intention I am:  <%=  i_am %>
</p>
<p>
	The <%= other_is %> is:  <%= other.full_name %>
</p>
<% else %>
<p>
	For this intention I am: 
		<%= radio_button_tag('as', 'requester', checked = @weal.requester == current_user || @weal.new_record?) %> requester
		<%= radio_button_tag('as', 'fulfiller', checked = @weal.fulfiller == current_user) %> fulfiller
</p>
<%end%>
<% when :weals 
	users = User.find(:all)%>
<p>
  <%= f.label :requester_id %><br />
  <%= f.select(:requester_id, users.collect {|p| [ p.full_name, p.id ] }, {:include_blank => '-'})%>
</p>
<p>
  <%= f.label :fulfiller_id %><br />
  <%= f.select(:fulfiller_id, users.collect {|p| [ p.full_name, p.id ] }, {:include_blank => '-'})%>
</p>
<% end %>
<p>
	Wealth generated by this intention will be measured in: <br />
	<% for currency in @currencies 
		exists = @weal.currencies.exists?(currency.id)
		%>
		<%= check_box_tag("currencies[#{currency.id}]",'1',exists)%> <%= currency.name %> <%=  hidden_field_tag "currencies[#{currency.id}]", '0'%>
		<%= text_field_tag("currencies[#{currency.id}_val]",exists ? @weal.currency_weal_links.find(:first,:conditions => "currency_id = #{currency.id}").link_spec : '')%>
		<br />
	<% end %>
</p>
<p>
	Tags: 
	<%= text_field_tag("tags",@weal.tag_list.join(', '),:size=>100) %>
<p>
